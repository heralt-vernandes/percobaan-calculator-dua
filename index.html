<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Calculator</title>
  <link href="styles.css" rel="stylesheet">
  <script src="script.js" defer></script>
  <style>*, *::before, *::after {
    box-sizing: border-box;
    font-family: Gotham Rounded, sans-serif;
    font-weight: normal;
  }
  
  body {
    padding: 0;
    margin: 0;
    background: var(--background);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  
  .calculator-grid {
    display: grid;
    justify-content: center;
    align-content: center;
    grid-template-columns: repeat(4, 80px);
    grid-template-rows: minmax(100px, auto) repeat(5, 80px);
    background-color: rgba(255, 255, 255, 0.15);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  }
  
  .search-column {
    background-color: rgba(255, 255, 255, 0.15);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 300px;
  }
  
  .search-column h2 {
    color: white;
    margin-bottom: 20px;
  }
  
  .search-column form {
    width: 100%;
  }
  
  .search-column input[type="text"] {
    width: 100%;
    padding: 10px;
    border: none;
    border-radius: 5px;
    margin-bottom: 10px;
  }
  
  .search-column input[type="submit"] {
    width: 100%;
    padding: 10px;
    border: none;
    border-radius: 5px;
    background-color: #4285f4;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  
  .search-column input[type="submit"]:hover {
    background-color: #357ae8;
  }
  
  .calculator-grid > button {
    cursor: pointer;
    font-size: 1.5rem;
    border: none;
    outline: none;
    background-color: var(--button-bg);
    border-radius: 10px;
    margin: 5px;
    transition: all 0.2s ease;
    color: var(--button-color);
  }
  
  .calculator-grid > button:hover {
    background-color: rgba(255, 255, 255, 0.9);
    transform: translateY(-2px);
    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);
  }
  
  .calculator-grid > button:active {
    transform: scale(0.95);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  }
  
  @keyframes buttonClick {
    0% { transform: scale(1); }
    50% { transform: scale(0.95); }
    100% { transform: scale(1); }
  }
  
  .button-click {
    animation: buttonClick 0.15s ease;
  }
  
  .span-two {
    grid-column: span 2;
    background-color: var(--button-color) !important;
    color: var(--button-bg) !important;
  }
  
  .output {
    grid-column: 1 / -1;
    background-color: var(--output-bg);
    display: flex;
    align-items: flex-end;
    justify-content: space-around;
    flex-direction: column;
    padding: 20px;
    word-wrap: break-word;
    word-break: break-all;
    border-radius: 10px;
    margin-bottom: 10px;
    box-shadow: inset 0 5px 10px rgba(0, 0, 0, 0.3);
  }
  
  .output .previous-operand {
    color: rgba(255, 255, 255, 0.75);
    font-size: 1.2rem;
  }
  
  .output .current-operand {
    color: var(--output-color);
    font-size: 2rem;
  }
  
  .ad-column {
    background-color: rgba(255, 255, 255, 0.15);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    width: 200px;
    height: 400px;
    color: white;
    text-align: center;
  }
  
  .ad-column h2 {
    margin-bottom: 20px;
  }
  
  .ad-column img {
    width: 150px;
    height: 150px;
    object-fit: cover;
    border-radius: 10px;
    margin-bottom: 20px;
  }
  
  .ad-column p {
    margin-bottom: 20px;
  }
  
  .ad-column button {
    padding: 10px 20px;
    background-color: #4CAF50;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  
  .ad-column button:hover {
    background-color: #45a049;
  }
  
  .modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.4);
  }
  
  .modal-content {
    background-color: #fefefe;
    margin: 5% auto;
    padding: 20px;
    border: 1px solid #888;
    width: 80%;
    max-width: 500px;
    border-radius: 10px;
    max-height: 80vh; /* Set maximum height to 80% of viewport height */
    overflow-y: auto; /* Enable vertical scrolling */
  }
  
  .close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
    cursor: pointer;
  }
  
  .close:hover,
  .close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
  }
  
  .calculator-container {
    position: relative;
    display: inline-block;
  }
  
  #about-btn {
    position: absolute;
    bottom: 10px;
    left: 10px;
    padding: 5px 10px;
    font-size: 0.8rem;
    background-color: rgba(255, 255, 255, 0.6);
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  
  #about-btn:hover {
    background-color: rgba(255, 255, 255, 0.8);
  }
  
  .page-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    min-height: 100vh;
    padding: 20px;
  }
  
  #about-btn {
    padding: 10px 15px;
    font-size: 1rem;
    background-color: rgba(255, 255, 255, 0.6);
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    height: fit-content;
  }
  
  #about-btn:hover {
    background-color: rgba(255, 255, 255, 0.8);
  }
  
  .page-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 20px;
    min-height: 100vh;
    padding: 20px;
  }
  
  .left-column {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
  }
  
  #logo {
    width: 100px; /* Adjust as needed */
    height: auto;
    margin-bottom: 10px;
  }
  
  #about-btn {
    padding: 10px 15px;
    font-size: 1rem;
    background-color: rgba(255, 255, 255, 0.6);
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }
  
  #about-btn:hover {
    background-color: rgba(255, 255, 255, 0.8);
  }
  
  /* Modal styles remain the same */
  #character-art {
    width: 200px;
    height: auto;
    object-fit: cover;
    border-radius: 10px;
    margin-bottom: 10px;
  }
  
  .page-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 20px;
    min-height: 100vh;
    padding: 20px;
  }
  
  .right-column {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  
  .history-column, .converter {
    background-color: rgba(255, 255, 255, 0.15);
    border-radius: 15px;
    padding: 20px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    width: 250px;
  }
  
  .history-column h3, .converter h3 {
    color: white;
    margin-bottom: 10px;
  }
  
  #history-list {
    list-style-type: none;
    padding: 0;
    margin: 0;
    max-height: 200px;
    overflow-y: auto;
  }
  
  #history-list li {
    color: white;
    margin-bottom: 5px;
    padding: 5px;
    background-color: rgba(255, 255, 255, 0.1);
    border-radius: 5px;
  }
  
  .converter input {
    width: 100%;
    padding: 5px;
    margin-bottom: 10px;
    border-radius: 5px;
    border: none;
  }
  
  #theme-toggle {
    margin-top: 10px;
    padding: 10px;
    background-color: rgba(255, 255, 255, 0.6);
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }
  
  /* Theme classes */
  .theme-light {
    --background: linear-gradient(to right, #ff9966, #ff5e62);
    --button-bg: rgba(255, 255, 255, 0.75);
    --button-color: #ff5e62;
    --output-bg: rgba(0, 0, 0, 0.75);
    --output-color: white;
  }
  
  .theme-dark {
    --background: linear-gradient(to right, #2c3e50, #4ca1af);
    --button-bg: rgba(255, 255, 255, 0.2);
    --button-color: #ffffff;
    --output-bg: rgba(255, 255, 255, 0.1);
    --output-color: white;
  }
  
  .theme-blue {
    --background: linear-gradient(to right, #2196f3, #f44336);
    --button-bg: rgba(255, 255, 255, 0.3);
    --button-color: #2196f3;
    --output-bg: rgba(0, 0, 0, 0.6);
    --output-color: white;
  }
  
  .theme-green {
    --background: linear-gradient(to right, #4CAF50, #2196F3);
    --button-bg: rgba(255, 255, 255, 0.3);
    --button-color: #4CAF50;
    --output-bg: rgba(0, 0, 0, 0.6);
    --output-color: white;
  }
  
  .theme-buttons {
    display: flex;
    gap: 10px;
    margin-top: 10px;
  }
  
  .theme-buttons button {
    padding: 5px 10px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s;
  }
  
  .modal-content img {
    width: 200px;
    height: auto;
    object-fit: cover;
    border-radius: 10px;
    margin-bottom: 20px;
    display: block;
    margin-left: auto;
    margin-right: auto;
  }
  
  /* Add some padding to the bottom of the modal content */
  .modal-content::after {
    content: "";
    display: block;
    height: 20px;
  }
  
  #password-prompt {
    margin-top: 20px;
  }
  
  #password-input {
    margin-right: 10px;
  }
  
  #character-art {
    display: none;
    max-width: 100%;
    height: auto;
    margin-top: 20px;
  }
  </style>
</head>
<body class="theme-light">
  <div class="page-container">
    <div class="left-column">
      <!-- Remove the character-art image from here -->
      <button id="about-btn">About</button>
      <div class="theme-buttons">
        <button id="theme-light">Light</button>
        <button id="theme-dark">Dark</button>
        <button id="theme-blue">Blue</button>
        <button id="theme-green">Green</button>
      </div>
    </div>
    <div class="calculator-grid">
      <div class="output">
        <div data-previous-operand class="previous-operand"></div>
        <div data-current-operand class="current-operand"></div>
      </div>
      <button data-all-clear class="span-two">AC</button>
      <button data-delete>DEL</button>
      <button data-operation>÷</button>
      <button data-operation>^</button>
      <button data-operation>√</button>
      <button data-operation>%</button>
      <button data-operation>*</button>
      <button data-number>7</button>
      <button data-number>8</button>
      <button data-number>9</button>
      <button data-operation>-</button>
      <button data-number>4</button>
      <button data-number>5</button>
      <button data-number>6</button>
      <button data-operation>+</button>
      <button data-number>1</button>
      <button data-number>2</button>
      <button data-number>3</button>
      <button data-sign>+/-</button>
      <button data-number>.</button>
      <button data-number>0</button>
      <button data-equals class="span-two">=</button>
    </div>
    <div class="right-column">
      <div class="history-column">
        <h3>Riwayat Perhitungan</h3>
        <ul id="history-list"></ul>
      </div>
      <div class="converter">
        <h3>Konversi Panjang</h3>
        <input type="number" id="cm-input" placeholder="cm">
        <input type="number" id="inch-input" placeholder="inch" readonly>
      </div>
    </div>
  </div>
  
  <!-- Updated About modal with password protection -->
  <div id="about-modal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h2>Tentang Kalkulator Ini</h2>
      <p>Dibuat oleh: Gerald Ibrani</p>
      <p>Kalkulator ini dikembangkan sebagai proyek sekolah untuk mendemonstrasikan keterampilan JavaScript dan konsep dasar pengembangan web.</p>
      <p>Fitur-fitur meliputi:</p>
      <ul>
        <li>Operasi aritmatika dasar</li>
        <li>Fungsi hapus dan bersihkan</li>
        <li>Desain responsif</li>
        <li>Pengubahan tema</li>
        <li>Riwayat perhitungan</li>
        <li>Konverter panjang</li>
        <li>Dukungan keyboard</li>
      </ul>
      <p>Cara penggunaan:</p>
      <ol>
        <li>Masukkan angka menggunakan tombol kalkulator atau keyboard Anda</li>
        <li>Pilih operasi (+, -, *, /, ^, √, %)</li>
        <li>Tekan sama dengan (=) atau Enter untuk melihat hasilnya</li>
        <li>Gunakan tombol AC untuk menghapus semua, atau DEL untuk menghapus entri terakhir</li>
        <li>Ganti tema menggunakan tombol tema</li>
        <li>Lihat riwayat perhitungan Anda di sebelah kanan</li>
        <li>Gunakan konverter panjang untuk mengubah antara cm dan inci</li>
      </ol>
      <p>Terima kasih telah menggunakan kalkulator ini!</p>
      <div id="password-prompt">
        <input type="password" id="password-input" placeholder="Masukkan password">
        <button id="submit-password">Lihat Gambar</button>
      </div>
      <img id="character-art" src="https://raw.githubusercontent.com/heralt-vernandes/percobaan-calculator-dua/main/illust_122940393_20241001_163709.jpg" alt="Karakter Art">
    </div>
  </div>
  
  <script>class Calculator {
    constructor(previousOperandTextElement, currentOperandTextElement) {
      this.previousOperandTextElement = previousOperandTextElement
      this.currentOperandTextElement = currentOperandTextElement
      this.clear()
    }
  
    clear() {
      this.currentOperand = ''
      this.previousOperand = ''
      this.operation = undefined
    }
  
    delete() {
      this.currentOperand = this.currentOperand.toString().slice(0, -1)
    }
  
    appendNumber(number) {
      if (number === '.' && this.currentOperand.includes('.')) return
      this.currentOperand = this.currentOperand.toString() + number.toString()
    }
  
    chooseOperation(operation) {
      if (this.currentOperand === '') return
      if (this.previousOperand !== '' && operation !== '√' && operation !== '%') {
        this.compute()
      }
      this.operation = operation
      if (operation === '√' || operation === '%') {
        this.compute()
      } else {
        this.previousOperand = this.currentOperand
        this.currentOperand = ''
      }
    }
  
    compute() {
      let computation
      const prev = parseFloat(this.previousOperand)
      const current = parseFloat(this.currentOperand)
      if (isNaN(prev) || isNaN(current)) return
      switch (this.operation) {
        case '+':
          computation = prev + current
          break
        case '-':
          computation = prev - current
          break
        case '*':
          computation = prev * current
          break
        case '÷':
          computation = prev / current
          break
        case '^':
          computation = Math.pow(prev, current)
          break
        case '√':
          computation = Math.sqrt(current)
          break
        case '%':
          computation = current / 100
          break
        default:
          return
      }
      this.currentOperand = computation
      const calculation = `${prev} ${this.operation} ${current} = ${computation}`
      addToHistory(calculation)
      this.operation = undefined
      this.previousOperand = ''
    }
  
    changeSign() {
      this.currentOperand = (parseFloat(this.currentOperand) * -1).toString()
    }
  
    getDisplayNumber(number) {
      const stringNumber = number.toString()
      const integerDigits = parseFloat(stringNumber.split('.')[0])
      const decimalDigits = stringNumber.split('.')[1]
      let integerDisplay
      if (isNaN(integerDigits)) {
        integerDisplay = ''
      } else {
        integerDisplay = integerDigits.toLocaleString('en', { maximumFractionDigits: 0 })
      }
      if (decimalDigits != null) {
        return `${integerDisplay}.${decimalDigits}`
      } else {
        return integerDisplay
      }
    }
  
    updateDisplay() {
      this.currentOperandTextElement.innerText =
        this.getDisplayNumber(this.currentOperand)
      if (this.operation != null) {
        this.previousOperandTextElement.innerText =
          `${this.getDisplayNumber(this.previousOperand)} ${this.operation}`
      } else {
        this.previousOperandTextElement.innerText = ''
      }
    }
  }
  
  const numberButtons = document.querySelectorAll('[data-number]')
  const operationButtons = document.querySelectorAll('[data-operation]')
  const equalsButton = document.querySelector('[data-equals]')
  const deleteButton = document.querySelector('[data-delete]')
  const allClearButton = document.querySelector('[data-all-clear]')
  const previousOperandTextElement = document.querySelector('[data-previous-operand]')
  const currentOperandTextElement = document.querySelector('[data-current-operand]')
  
  const calculator = new Calculator(previousOperandTextElement, currentOperandTextElement)
  
  function addClickAnimation(button) {
    button.addEventListener('click', () => {
      button.classList.add('button-click');
      setTimeout(() => {
        button.classList.remove('button-click');
      }, 150);
    });
  }
  
  numberButtons.forEach(button => {
    addClickAnimation(button);
    button.addEventListener('click', () => {
      calculator.appendNumber(button.innerText);
      calculator.updateDisplay();
    });
  });
  
  operationButtons.forEach(button => {
    addClickAnimation(button);
    button.addEventListener('click', () => {
      calculator.chooseOperation(button.innerText);
      calculator.updateDisplay();
    });
  });
  
  equalsButton.addEventListener('click', button => {
    addClickAnimation(equalsButton);
    calculator.compute();
    calculator.updateDisplay();
  });
  
  allClearButton.addEventListener('click', button => {
    addClickAnimation(allClearButton);
    calculator.clear();
    calculator.updateDisplay();
  });
  
  deleteButton.addEventListener('click', button => {
    addClickAnimation(deleteButton);
    calculator.delete();
    calculator.updateDisplay();
  });
  
  const signButton = document.querySelector('[data-sign]')
  
  signButton.addEventListener('click', button => {
    addClickAnimation(signButton);
    calculator.changeSign();
    calculator.updateDisplay();
  })
  
  // About modal functionality
  const aboutBtn = document.getElementById("about-btn");
  const aboutModal = document.getElementById("about-modal");
  const closeBtn = aboutModal.querySelector(".close");
  
  aboutBtn.onclick = function() {
    aboutModal.style.display = "block";
  }
  
  closeBtn.onclick = function() {
    aboutModal.style.display = "none";
  }
  
  window.onclick = function(event) {
    if (event.target == aboutModal) {
      aboutModal.style.display = "none";
    }
  }
  
  // History function
  function addToHistory(calculation) {
    const historyList = document.getElementById('history-list');
    const listItem = document.createElement('li');
    listItem.textContent = calculation;
    historyList.insertBefore(listItem, historyList.firstChild);
    
    if (historyList.children.length > 10) {
      historyList.removeChild(historyList.lastChild);
    }
  }
  
  // Converter
  const cmInput = document.getElementById('cm-input');
  const inchInput = document.getElementById('inch-input');

  cmInput.addEventListener('input', function() {
    const cm = parseFloat(this.value);
    inchInput.value = cm ? (cm / 2.54).toFixed(2) : '';
  });

  // Theme toggle
  const themeButtons = document.querySelectorAll('.theme-buttons button');
  const body = document.body;

  themeButtons.forEach(button => {
    button.addEventListener('click', function() {
      const theme = this.id.split('-')[1];
      body.className = ''; // Remove all themes
      body.classList.add(`theme-${theme}`);
    });
  });

  // Keyboard support
  document.addEventListener('keydown', function(event) {
    const key = event.key;
    if (/[0-9]/.test(key)) {
      calculator.appendNumber(key);
      calculator.updateDisplay();
    } else if (['+', '-', '*', '/', 'x'].includes(key)) {
      let operation = key === 'x' ? '*' : key;
      calculator.chooseOperation(operation);
      calculator.updateDisplay();
    } else if (key === 'Enter') {
      calculator.compute();
      calculator.updateDisplay();
    } else if (key === 'Backspace') {
      calculator.delete();
      calculator.updateDisplay();
    } else if (key === 'Escape') {
      calculator.clear();
      calculator.updateDisplay();
    }
  });

  // Password protection for the image
  const passwordInput = document.getElementById('password-input');
  const submitPassword = document.getElementById('submit-password');
  const characterArt = document.getElementById('character-art');
  const correctPassword = 'prototype'; // Password changed to "prototype"

  submitPassword.addEventListener('click', function() {
    if (passwordInput.value.toLowerCase() === correctPassword) {
      characterArt.style.display = 'block';
      passwordInput.style.display = 'none';
      submitPassword.style.display = 'none';
    } else {
      alert('Password salah. Coba lagi.');
    }
  });
  </script>
</body>
</html>
